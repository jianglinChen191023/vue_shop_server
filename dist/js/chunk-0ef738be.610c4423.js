(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ef738be"],{"107c":function(t,e,a){var r=a("d039"),n=a("da84"),o=n.RegExp;t.exports=r((function(){var t=o("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},1276:function(t,e,a){"use strict";var r=a("2ba4"),n=a("c65b"),o=a("e330"),i=a("d784"),s=a("44e7"),l=a("825a"),u=a("1d80"),c=a("4840"),d=a("8aa5"),p=a("50c4"),f=a("577e"),g=a("dc4a"),b=a("f36a"),h=a("14c3"),m=a("9263"),v=a("9f7f"),_=a("d039"),x=v.UNSUPPORTED_Y,y=4294967295,w=Math.min,F=[].push,E=o(/./.exec),I=o(F),R=o("".slice),k=!_((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var a="ab".split(t);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));i("split",(function(t,e,a){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,a){var o=f(u(this)),i=void 0===a?y:a>>>0;if(0===i)return[];if(void 0===t)return[o];if(!s(t))return n(e,o,t,i);var l,c,d,p=[],g=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,v=new RegExp(t.source,g+"g");while(l=n(m,v,o)){if(c=v.lastIndex,c>h&&(I(p,R(o,h,l.index)),l.length>1&&l.index<o.length&&r(F,p,b(l,1)),d=l[0].length,h=c,p.length>=i))break;v.lastIndex===l.index&&v.lastIndex++}return h===o.length?!d&&E(v,"")||I(p,""):I(p,R(o,h)),p.length>i?b(p,0,i):p}:"0".split(void 0,0).length?function(t,a){return void 0===t&&0===a?[]:n(e,this,t,a)}:e,[function(e,a){var r=u(this),i=void 0==e?void 0:g(e,t);return i?n(i,e,r,a):n(o,f(r),e,a)},function(t,r){var n=l(this),i=f(t),s=a(o,n,i,r,o!==e);if(s.done)return s.value;var u=c(n,RegExp),g=n.unicode,b=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(x?"g":"y"),m=new u(x?"^(?:"+n.source+")":n,b),v=void 0===r?y:r>>>0;if(0===v)return[];if(0===i.length)return null===h(m,i)?[i]:[];var _=0,F=0,E=[];while(F<i.length){m.lastIndex=x?0:F;var k,$=h(m,x?R(i,F):i);if(null===$||(k=w(p(m.lastIndex+(x?F:0)),i.length))===_)F=d(i,F,g);else{if(I(E,R(i,_,F)),E.length===v)return E;for(var j=1;j<=$.length-1;j++)if(I(E,$[j]),E.length===v)return E;F=_=k}}return I(E,R(i,_)),E}]}),!k,x)},"14c3":function(t,e,a){var r=a("da84"),n=a("c65b"),o=a("825a"),i=a("1626"),s=a("c6b6"),l=a("9263"),u=r.TypeError;t.exports=function(t,e){var a=t.exec;if(i(a)){var r=n(a,t,e);return null!==r&&o(r),r}if("RegExp"===s(t))return n(l,t,e);throw u("RegExp#exec called on incompatible receiver")}},"159b":function(t,e,a){var r=a("da84"),n=a("fdbc"),o=a("785a"),i=a("17c2"),s=a("9112"),l=function(t){if(t&&t.forEach!==i)try{s(t,"forEach",i)}catch(e){t.forEach=i}};for(var u in n)n[u]&&l(r[u]&&r[u].prototype);l(o)},"17c2":function(t,e,a){"use strict";var r=a("b727").forEach,n=a("a640"),o=n("forEach");t.exports=o?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"1bab":function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var r=a("cebe"),n=a.n(r),o=a("4360"),i=a("1af2"),s=a.n(i);function l(t){var e=n.a.create({baseURL:"https://lianghj.top:8888/api/private/v1",timeout:5e3});return e.interceptors.request.use((function(t){return s.a.start(),t.headers.authorization=o["a"].getters.token,t}),(function(t){})),e.interceptors.response.use((function(t){return s.a.done(),t.data}),(function(t){})),e(t)}},"44e7":function(t,e,a){var r=a("861d"),n=a("c6b6"),o=a("b622"),i=o("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==n(t))}},"4fcf":function(t,e,a){"use strict";a.d(e,"d",(function(){return n})),a.d(e,"a",(function(){return o})),a.d(e,"c",(function(){return i})),a.d(e,"e",(function(){return s})),a.d(e,"b",(function(){return l}));var r=a("1bab");function n(t){return Object(r["a"])({url:"/categories",params:t})}function o(t){return Object(r["a"])({url:"/categories",method:"post",data:t})}function i(t){return Object(r["a"])({url:"/categories/".concat(t)})}function s(t,e){return Object(r["a"])({url:"/categories/".concat(t),method:"put",data:{cat_name:e}})}function l(t){return Object(r["a"])({url:"/categories/".concat(t),method:"delete"})}},6502:function(t,e,a){"use strict";a("d1db")},"8aa5":function(t,e,a){"use strict";var r=a("6547").charAt;t.exports=function(t,e,a){return e+(a?r(t,e).length:1)}},9263:function(t,e,a){"use strict";var r=a("c65b"),n=a("e330"),o=a("577e"),i=a("ad6d"),s=a("9f7f"),l=a("5692"),u=a("7c73"),c=a("69f3").get,d=a("fce3"),p=a("107c"),f=l("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,b=g,h=n("".charAt),m=n("".indexOf),v=n("".replace),_=n("".slice),x=function(){var t=/a/,e=/b*/g;return r(g,t,"a"),r(g,e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),y=s.UNSUPPORTED_Y||s.BROKEN_CARET,w=void 0!==/()??/.exec("")[1],F=x||w||y||d||p;F&&(b=function(t){var e,a,n,s,l,d,p,F=this,E=c(F),I=o(t),R=E.raw;if(R)return R.lastIndex=F.lastIndex,e=r(b,R,I),F.lastIndex=R.lastIndex,e;var k=E.groups,$=y&&F.sticky,j=r(i,F),O=F.source,T=0,D=I;if($&&(j=v(j,"y",""),-1===m(j,"g")&&(j+="g"),D=_(I,F.lastIndex),F.lastIndex>0&&(!F.multiline||F.multiline&&"\n"!==h(I,F.lastIndex-1))&&(O="(?: "+O+")",D=" "+D,T++),a=new RegExp("^(?:"+O+")",j)),w&&(a=new RegExp("^"+O+"$(?!\\s)",j)),x&&(n=F.lastIndex),s=r(g,$?a:F,D),$?s?(s.input=_(s.input,T),s[0]=_(s[0],T),s.index=F.lastIndex,F.lastIndex+=s[0].length):F.lastIndex=0:x&&s&&(F.lastIndex=F.global?s.index+s[0].length:n),w&&s&&s.length>1&&r(f,s[0],a,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(s[l]=void 0)})),s&&k)for(s.groups=d=u(null),l=0;l<k.length;l++)p=k[l],d[p[0]]=s[p[1]];return s}),t.exports=b},"9be2":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("修改商品")])],1),a("el-card",[a("el-alert",{attrs:{title:"添加商品信息",type:"info",center:"","show-icon":"",closable:!1}}),a("el-steps",{attrs:{space:200,active:t.activeIndex-0,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"基本信息"}}),a("el-step",{attrs:{title:"商品参数"}}),a("el-step",{attrs:{title:"商品属性"}}),a("el-step",{attrs:{title:"商品图片"}}),a("el-step",{attrs:{title:"商品内容"}}),a("el-step",{attrs:{title:"完成"}})],1),a("el-form",{ref:"updateFormRef",attrs:{model:t.updateForm,rules:t.updateFormRules,"label-width":"100px","label-position":"top"}},[a("el-tabs",{attrs:{"before-leave":t.beforeTabLeave,"tab-position":"left"},on:{"tab-click":t.tabClicked},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"0"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[a("el-input",{model:{value:t.updateForm.goods_name,callback:function(e){t.$set(t.updateForm,"goods_name",e)},expression:"updateForm.goods_name"}})],1),a("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[a("el-input",{attrs:{type:"number"},model:{value:t.updateForm.goods_price,callback:function(e){t.$set(t.updateForm,"goods_price",e)},expression:"updateForm.goods_price"}})],1),a("el-form-item",{attrs:{label:"商品重量",prop:"goods_weight"}},[a("el-input",{attrs:{type:"number"},model:{value:t.updateForm.goods_weight,callback:function(e){t.$set(t.updateForm,"goods_weight",e)},expression:"updateForm.goods_weight"}})],1),a("el-form-item",{attrs:{label:"商品数量",prop:"goods_number"}},[a("el-input",{model:{value:t.updateForm.goods_number,callback:function(e){t.$set(t.updateForm,"goods_number",e)},expression:"updateForm.goods_number"}})],1),a("el-form-item",{attrs:{label:"商品分类",prop:"goods_cat"}},[a("el-cascader",{attrs:{"expand-trigger":"hover",options:t.cateList,props:t.cateProps},on:{change:t.handleChange},model:{value:t.updateForm.goods_cat,callback:function(e){t.$set(t.updateForm,"goods_cat",e)},expression:"updateForm.goods_cat"}})],1)],1),a("el-tab-pane",{attrs:{label:"商品参数",name:"1"}},t._l(t.manyTableData,(function(e){return a("el-form-item",{key:e.attr_id,attrs:{label:e.attr_name}},[a("el-checkbox-group",{model:{value:e.attr_vals,callback:function(a){t.$set(e,"attr_vals",a)},expression:"item.attr_vals"}},t._l(e.attr_vals,(function(t,e){return a("el-checkbox",{key:e,attrs:{label:t,border:""}})})),1)],1)})),1),a("el-tab-pane",{attrs:{label:"商品属性",name:"2"}},t._l(t.onlyTableData,(function(e){return a("el-form-item",{key:e.attr_id,attrs:{label:e.attr_name}},[a("el-input",{model:{value:e.attr_vals,callback:function(a){t.$set(e,"attr_vals",a)},expression:"item.attr_vals"}})],1)})),1),a("el-tab-pane",{attrs:{label:"商品图片",name:"3"}},[a("el-upload",{attrs:{"file-list":t.uploadFileList,"on-success":t.handleSuccess,headers:t.headerObj,action:t.uploadURL,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),a("el-tab-pane",{attrs:{label:"商品内容",name:"4"}},[a("quill-editor",{model:{value:t.updateForm.goods_introduce,callback:function(e){t.$set(t.updateForm,"goods_introduce",e)},expression:"updateForm.goods_introduce"}}),a("el-button",{staticClass:"btnAdd",attrs:{type:"primary"},on:{click:t.update}},[t._v("修改商品")])],1)],1)],1)],1),a("el-dialog",{attrs:{title:"图片预览",visible:t.previewDialogVisible,width:"50%"},on:{"update:visible":function(e){t.previewDialogVisible=e}}},[a("img",{staticClass:"previewImg",attrs:{src:t.previewPath,alt:""}})])],1)},n=[],o=(a("ac1f"),a("1276"),a("d81d"),a("d3b7"),a("159b"),a("c740"),a("a434"),a("a15b"),a("4fcf")),i=a("1bab");function s(t){return Object(i["a"])({url:"/goods/".concat(t)})}function l(t,e){return Object(i["a"])({url:"/goods/".concat(t),method:"put",data:e})}var u=a("60bb"),c=a.n(u),d={name:"ListUpdate",data:function(){return{activeIndex:"0",updateForm:{goods_name:"",goods_price:0,goods_weight:0,goods_number:0,goods_cat:[],pics:[],goods_introduce:"",attrs:[]},updateFormRules:{goods_name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],goods_price:[{required:!0,message:"请输入商品价格",trigger:"blur"},{required:!0,message:"请输入商品价格",trigger:"blur"}],goods_weight:[{required:!0,message:"请输入商品重量",trigger:"blur"}],goods_number:[{required:!0,message:"请输入商品数量",trigger:"blur"}],goods_cat:[{required:!0,message:"请选择商品分类",trigger:"blur"}]},cateList:[],cateProps:{label:"cat_name",value:"cat_id",children:"children"},manyTableData:[],onlyTableData:[],uploadURL:"https://lianghj.top:8888/api/private/v1/upload",headerObj:{authorization:this.$store.getters.token},previewPath:"",previewDialogVisible:!1,uploadFileList:[]}},created:function(){this.getCateList(),this.handleParams()},methods:{handleParams:function(){var t=this,e=this.$route.query.id;s(e).then((function(e){if(200!==e.meta.status)return t.$message.error("获取商品数据失败!");var a=e.data;a.goods_cat=0!==a.goods_cat.length?a.goods_cat.split(","):[],a.goods_cat.map((function(t,e){a.goods_cat[e]=parseInt(t)})),t.updateForm=a,t.updateForm.attrs.forEach((function(e){"only"===e.attr_sel?t.onlyTableData.push({attr_id:e.attr_id,attr_vals:e.attr_value}):t.manyTableData.push({attr_id:e.attr_id,attr_vals:0!==e.attr_value.length?e.attr_value.split(" "):[]})})),t.updateForm.pics.forEach((function(e){t.uploadFileList.push({name:"已上传文件",url:e.pics_big_url})}))}))},getCateList:function(){var t=this;Object(o["d"])({}).then((function(e){if(200!==e.meta.status)return t.$message.error("获取商品分类数据失败!");t.cateList=e.data}))},handleChange:function(){3!==this.updateForm.goods_cat.length&&(this.updateForm.goods_cat=[])},beforeTabLeave:function(t,e){if("0"===e&&3!==this.updateForm.goods_cat.length)return this.$message.error("请先选择商品分类!"),!1},tabClicked:function(){},handlePreview:function(t){this.previewPath=t.response.data.url,this.previewDialogVisible=!0},handleRemove:function(t){var e=t.response.data.tmp_path,a=this.updateForm.pics.findIndex((function(t){return t.pic===e}));this.updateForm.pics.splice(a,1)},handleSuccess:function(t){var e={pic:t.data.tmp_path};this.updateForm.pics.push(e)},update:function(){var t=this;this.$refs.updateFormRef.validate((function(e){if(!e)return t.$message.error("请填写必要的表单项!");var a=c.a.cloneDeep(t.updateForm);a.goods_cat=a.goods_cat.join(","),a.attrs=[],t.manyTableData.forEach((function(t){var e={attr_id:t.attr_id,attr_value:t.attr_vals.join(" ")};a.attrs.push(e)})),t.onlyTableData.forEach((function(t){var e={attr_id:t.attr_id,attr_value:t.attr_vals};a.attrs.push(e)})),l(t.$route.query.id,a).then((function(e){if(200!==e.meta.status)return t.$message.error("修改商品失败!");t.$message.success("修改商品成功!"),t.$router.push("/goods")}))}))}}},p=d,f=(a("6502"),a("2877")),g=Object(f["a"])(p,r,n,!1,null,"b37b1178",null);e["default"]=g.exports},"9f7f":function(t,e,a){var r=a("d039"),n=a("da84"),o=n.RegExp;e.UNSUPPORTED_Y=r((function(){var t=o("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=r((function(){var t=o("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a15b:function(t,e,a){"use strict";var r=a("23e7"),n=a("e330"),o=a("44ad"),i=a("fc6a"),s=a("a640"),l=n([].join),u=o!=Object,c=s("join",",");r({target:"Array",proto:!0,forced:u||!c},{join:function(t){return l(i(this),void 0===t?",":t)}})},a434:function(t,e,a){"use strict";var r=a("23e7"),n=a("da84"),o=a("23cb"),i=a("5926"),s=a("07fa"),l=a("7b0b"),u=a("65f0"),c=a("8418"),d=a("1dde"),p=d("splice"),f=n.TypeError,g=Math.max,b=Math.min,h=9007199254740991,m="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!p},{splice:function(t,e){var a,r,n,d,p,v,_=l(this),x=s(_),y=o(t,x),w=arguments.length;if(0===w?a=r=0:1===w?(a=0,r=x-y):(a=w-2,r=b(g(i(e),0),x-y)),x+a-r>h)throw f(m);for(n=u(_,r),d=0;d<r;d++)p=y+d,p in _&&c(n,d,_[p]);if(n.length=r,a<r){for(d=y;d<x-r;d++)p=d+r,v=d+a,p in _?_[v]=_[p]:delete _[v];for(d=x;d>x-r+a;d--)delete _[d-1]}else if(a>r)for(d=x-r;d>y;d--)p=d+r-1,v=d+a-1,p in _?_[v]=_[p]:delete _[v];for(d=0;d<a;d++)_[d+y]=arguments[d+2];return _.length=x-r+a,n}})},a640:function(t,e,a){"use strict";var r=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&r((function(){a.call(null,e||function(){throw 1},1)}))}},ac1f:function(t,e,a){"use strict";var r=a("23e7"),n=a("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},ad6d:function(t,e,a){"use strict";var r=a("825a");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},c740:function(t,e,a){"use strict";var r=a("23e7"),n=a("b727").findIndex,o=a("44d2"),i="findIndex",s=!0;i in[]&&Array(1)[i]((function(){s=!1})),r({target:"Array",proto:!0,forced:s},{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),o(i)},d1db:function(t,e,a){},d784:function(t,e,a){"use strict";a("ac1f");var r=a("e330"),n=a("6eeb"),o=a("9263"),i=a("d039"),s=a("b622"),l=a("9112"),u=s("species"),c=RegExp.prototype;t.exports=function(t,e,a,d){var p=s(t),f=!i((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),g=f&&!i((function(){var e=!1,a=/a/;return"split"===t&&(a={},a.constructor={},a.constructor[u]=function(){return a},a.flags="",a[p]=/./[p]),a.exec=function(){return e=!0,null},a[p](""),!e}));if(!f||!g||a){var b=r(/./[p]),h=e(p,""[t],(function(t,e,a,n,i){var s=r(t),l=e.exec;return l===o||l===c.exec?f&&!i?{done:!0,value:b(e,a,n)}:{done:!0,value:s(a,e,n)}:{done:!1}}));n(String.prototype,t,h[0]),n(c,p,h[1])}d&&l(c[p],"sham",!0)}},d81d:function(t,e,a){"use strict";var r=a("23e7"),n=a("b727").map,o=a("1dde"),i=o("map");r({target:"Array",proto:!0,forced:!i},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},fce3:function(t,e,a){var r=a("d039"),n=a("da84"),o=n.RegExp;t.exports=r((function(){var t=o(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))}}]);
//# sourceMappingURL=chunk-0ef738be.610c4423.js.map