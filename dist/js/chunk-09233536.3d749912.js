(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-09233536"],{"1bab":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var s=a("cebe"),r=a.n(s),n=a("4360"),o=a("1af2"),i=a.n(o);function c(e){var t=r.a.create({baseURL:"https://lianghj.top:8888/api/private/v1",timeout:5e3});return t.interceptors.request.use((function(e){return i.a.start(),e.headers.authorization=n["a"].getters.token,e}),(function(e){})),t.interceptors.response.use((function(e){return i.a.done(),e.data}),(function(e){})),t(e)}},"4fcf":function(e,t,a){"use strict";a.d(t,"d",(function(){return r})),a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"e",(function(){return i})),a.d(t,"b",(function(){return c}));var s=a("1bab");function r(e){return Object(s["a"])({url:"/categories",params:e})}function n(e){return Object(s["a"])({url:"/categories",method:"post",data:e})}function o(e){return Object(s["a"])({url:"/categories/".concat(e)})}function i(e,t){return Object(s["a"])({url:"/categories/".concat(e),method:"put",data:{cat_name:t}})}function c(e){return Object(s["a"])({url:"/categories/".concat(e),method:"delete"})}},7052:function(e,t,a){},c8ca:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("商品管理")]),a("el-breadcrumb-item",[e._v("商品分类")])],1),a("el-card",[a("el-row",[a("el-col",[a("el-button",{attrs:{type:"primary"},on:{click:e.showAddCateDialog}},[e._v("添加分类")])],1)],1),a("zk-table",{ref:"table",staticClass:"zkTable",attrs:{"sum-text":"sum","index-text":"#",data:e.cateList,columns:e.columns,stripe:e.props.stripe,border:e.props.border,"show-header":e.props.showHeader,"show-summary":e.props.showSummary,"show-row-hover":e.props.showRowHover,"show-index":e.props.showIndex,"tree-type":e.props.treeType,"is-fold":e.props.isFold,"expand-type":e.props.expandType,"selection-type":e.props.selectionType},scopedSlots:e._u([{key:"isok",fn:function(e){return[!1===e.row.cat_deleted?a("i",{staticClass:"el-icon-success",staticStyle:{color:"lightgreen"}}):a("i",{staticClass:"el-icon-error",staticStyle:{color:"red"}})]}},{key:"order",fn:function(t){return[0===t.row.cat_level?a("el-tag",{attrs:{size:"mini"}},[e._v("一级")]):1===t.row.cat_level?a("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("二级")]):a("el-tag",{attrs:{type:"warning",size:"mini"}},[e._v("三级")])]}},{key:"opt",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.showUpdateDialog(t.row.cat_id)}}},[e._v("编辑 ")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.deleteCate(t.row.cat_id)}}},[e._v("删除 ")])]}}])}),a("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[3,5,,10,15],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"提示",visible:e.addCateDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addCateDialogVisible=t},close:e.addCateDialogClosed}},[a("el-form",{ref:"addCateFormRef",attrs:{model:e.addCateForm,rules:e.addCateFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分类名称: ",prop:"cat_name"}},[a("el-input",{model:{value:e.addCateForm.cat_name,callback:function(t){e.$set(e.addCateForm,"cat_name",t)},expression:"addCateForm.cat_name"}})],1),a("el-form-item",{attrs:{label:"父级分类: "}},[a("el-cascader",{attrs:{"change-on-select":"",clearable:"","expand-trigger":"hover",options:e.parentCateList,props:e.cascaderProps},on:{change:e.parentCateChanged},model:{value:e.selectedKeys,callback:function(t){e.selectedKeys=t},expression:"selectedKeys"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addCateDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addCate}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑分类",visible:e.updateDialogVisible,width:"50%"},on:{"update:visible":function(t){e.updateDialogVisible=t}}},[a("el-form",{ref:"updateFormRef",attrs:{model:e.updateForm,rules:e.updateRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"分类名称",prop:"cat_name"}},[a("el-input",{model:{value:e.updateForm.cat_name,callback:function(t){e.$set(e.updateForm,"cat_name",t)},expression:"updateForm.cat_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.updateDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.updateCate}},[e._v("确 定")])],1)],1)],1)},r=[],n=a("4fcf"),o={name:"Cate",data:function(){return{queryInfo:{type:3,pagenum:1,pagesize:5},cateList:[],total:0,columns:[{label:"分类名称",prop:"cat_name"},{label:"是否有效",type:"template",template:"isok"},{label:"排序",type:"template",template:"order"},{label:"操作",type:"template",template:"opt"}],props:{selectionType:!1,expandType:!1,showIndex:!0,border:!0,showRowHover:!1},addCateDialogVisible:!1,addCateForm:{cat_name:"",cat_pid:0,cat_level:0},addCateFormRules:{cat_name:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},parentCateList:[],cascaderProps:{value:"cat_id",label:"cat_name",children:"children"},selectedKeys:[],updateId:"",updateDialogVisible:!1,updateForm:{cat_name:""},updateRules:{cat_name:[{required:"true",message:"分类名称不能为空!",trigger:"blur"}]}}},created:function(){this.getCateList()},methods:{getCateList:function(){var e=this;Object(n["d"])(this.queryInfo).then((function(t){200!==t.meta.status&&e.$message.error("获取商品分类失败!"),e.$message.success("获取商品分类成功!"),e.cateList=t.data.result,e.total=t.data.total}))},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getCateList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getCateList()},showAddCateDialog:function(){this.getParentCateList(),this.addCateDialogVisible=!0},parentCateChanged:function(){this.selectedKeys.length>0?(this.addCateForm.cat_pid=this.selectedKeys[this.selectedKeys.length-1],this.addCateForm.cat_level=this.selectedKeys.length):(this.addCateForm.cat_pid=0,this.addCateForm.cat_level=this.selectedKeys.length)},getParentCateList:function(){var e=this;Object(n["d"])().then((function(t){200!==t.meta.status&&e.$message.error("获取父级分类数据失败!"),e.parentCateList=t.data}))},addCateDialogClosed:function(){this.$refs.addCateFormRef.resetFields(),this.selectedKeys=[],this.addCateForm.cat_pid=0,this.addCateForm.cat_level=0},addCate:function(){var e=this;this.$refs.addCateFormRef.validate((function(t){t&&Object(n["a"])(e.addCateForm).then((function(t){if(201!==t.meta.status)return e.$message.error("添加分类失败!");e.$message.success("添加分类成功!"),e.getCateList(),e.addCateDialogVisible=!1}))}))},showUpdateDialog:function(e){var t=this;Object(n["c"])(e).then((function(e){if(200!==e.meta.status)return t.$message.error("查询分类失败!");t.updateDialogVisible=!0,t.updateForm=e.data}))},updateCate:function(){var e=this;this.$refs.updateFormRef.validate((function(t){t&&Object(n["e"])(e.updateForm.cat_id,e.updateForm.cat_name).then((function(t){if(200!==t.meta.status)return e.$message.error("编辑分类失败!");e.$message.success("编辑分类成功!"),e.updateDialogVisible=!1,e.getCateList()}))}))},deleteCate:function(e){var t=this;this.$confirm("此操作将永久删除该分类, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n["b"])(e).then((function(e){if(200!==e.meta.status)return t.$message.error("删除分类失败!");t.$message.success("删除分类成功!"),t.getCateList()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}}},i=o,c=(a("da5e"),a("2877")),l=Object(c["a"])(i,s,r,!1,null,"5d0cae3a",null);t["default"]=l.exports},da5e:function(e,t,a){"use strict";a("7052")}}]);
//# sourceMappingURL=chunk-09233536.3d749912.js.map